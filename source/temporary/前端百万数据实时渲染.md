

### 前述

> 前端常见大数据量展示的方案有如下二种

- 1. 分页加载，逐页加载数据，像常见的微博、知乎信息流就是采用这种方式，在不断翻页的过程中，将之前的DOM回收，记录当前滚动距离scrollTop, 保持页面只实时渲染少量的DOM，保证了页面高效的渲染性能
- 2. 全量加载, 加载全量数据，常见于大数据量表格的数据预览，根据scroll滚动到的区域，只渲染对应区域的数据，跟第一种方案的思路是一致的，都是通过渲染更少的DOM实现页面的高效渲染
- 主要采用到的技术是 Dom回收 与 滚动锚定，详细介绍可以参考 https://juejin.im/post/58a3c81e128fe10058c57a8b

> 上面二种常见的方案，虽然在渲染方面没有问题，但是在数据量非常大的时候，像百万数据的实时加载、排序、关键字过滤等，数据的加载和计算也是非常消耗内存和计算量的，这样，同样会导致页面的卡顿与渲染阻塞

> 我现在在做的是一个大数据量表格的实时预览，数据从后台分批获取，加载完成后全量塞入表格中，然后表格要实现filter、sort等功能，通过上述技术，渲染方面没有太大问题，但是由于数据是分批加载，不断的发送http请求，并将返回结果保存，随着数据量不断增加，对内存的操作耗时，会阻塞页面渲染与交互，所以打算将数据的加载和计算（filter、sort）放入 webWorker中


第二种方案的难度在于二点

1. 每一条数据对应的DOM, 高度必须是固定的，或者有固定的计算规则，这样才能通过scrollTop准确找到当前对应的数据
2. 



1. [vue-virtual-scroll-list](https://github.com/tangbc/vue-virtual-scroll-list) , 一个列表scroll组件，同时实现了分页加载与全量加载

> 实现思路

> 全量数据加载，已知
一行数据的高度： 20px 
一屏显示多少条数据： 20 
总数据量: 10000

获取总高度 10000 * 20px
> 

不在当前可视区域的DOM元素不被渲染，通过padding为未渲染的DOM元素占位
paddingTop
paddingBottom 


scroll滚动时，触发onscroll事件，通过scrollTop属性，获取当前可视区域起始行，与 top、bottom padding

1. Dom回收（自动由vue进行）


> 通过 $slot.default 获取默认slots ，当slots是动态变化时，存在一些问题